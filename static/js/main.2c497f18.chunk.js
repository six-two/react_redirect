(this.webpackJsonpreact_redirect=this.webpackJsonpreact_redirect||[]).push([[0],{13:function(e,t,a){e.exports=a(19)},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),i=a.n(o),s=a(11),c=a(2),l=a(3),u=a(5),h=a(4),p=(a(18),a(6));function d(e){if(!e.match(/^https?:\/\/.*/))return"The URL has to start with 'http://' or 'https://' (without the quotes)";var t=e.match(/[ "<>{}^|]/g);if(t)return"The URL contains some illegal characters that have not been properly escaped: '"+Object(p.a)(new Set(t)).join("', '")+"'";try{return new URL(e).host?"":"The URL has to contain a host (like example.com or 127.0.0.1)"}catch(a){return"Not a valid URL"}}function m(e){return 2!==e.split("%s").length?"Template must contain exactly one '%s' (without the quotes) to signal where to embed the encoded URL":""}function v(e,t){var a=[],r=d(t);r&&a.push("Error with 'redirectToUrl': "+r),(r=d(e))&&a.push("Error with 'templateUrl': "+r),(r=m(e))&&a.push("Error with 'templateUrl': "+r);var n="LNK"+btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return{errors:a,url:e.replace("%s",n)}}var f=a(10),w=/^https?:\/\//;function b(e){var t,a=(e=e||new URL(window.location.href)).hash,r=Object(p.a)(e.searchParams.values());if(a){if(t=g(a=a.substr(1)))return t;r=[].concat(Object(p.a)(r),Object(p.a)(new URLSearchParams(a).values()))}var n,o=Object(f.a)(r.reverse());try{for(o.s();!(n=o.n()).done;){if(t=g(n.value))return t}}catch(i){o.e(i)}finally{o.f()}}function g(e){try{if(e.startsWith("LNK")){var t=function(e){var t=(e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4;0!==t&&(e+="===".slice(0,4-t));return atob(e)}(e=e.substr("LNK".length));if(t.match(w))return t}}catch(a){console.error("Error while decoding possible redirect link:",a)}}var E,k=a(12),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).onValueChange=function(t){var a=Object(k.a)({},e.props.data);a[e.props.row.fieldName]=t.target.value,e.props.setData(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.row,t=this.props.data[e.fieldName],a=e.checkForErrors(t),r=a?"error":void 0;return n.a.createElement("div",null,n.a.createElement("div",{className:"input-row"},n.a.createElement("div",{className:"label"},e.label),n.a.createElement("div",{className:"input"},n.a.createElement("input",{className:r,type:"text",title:e.description,value:t,onChange:this.onValueChange}))),a?n.a.createElement("div",{className:"err-msg"},a):null)}}]),a}(n.a.Component),j={label:"Destination URL",description:"The URL that you want the user to be redirected to",checkForErrors:d,fieldName:"url"},L={label:"Template",description:"The template can be used to mislead the person viewing the link into believing that it has a different purpose (for example to disguise it as an unsubscribe link)",checkForErrors:m,fieldName:"template"},U={label:"Redirect page URL",description:"The URL where your server hosts your redirect page",checkForErrors:d,fieldName:"page"},O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=v(this.props.data.page+this.props.data.template,this.props.data.url).url;return n.a.createElement("div",{className:"create-link-root"},n.a.createElement(y,{data:this.props.data,setData:this.props.setData,row:j}),n.a.createElement(y,{data:this.props.data,setData:this.props.setData,row:L}),n.a.createElement(y,{data:this.props.data,setData:this.props.setData,row:U}),n.a.createElement("h2",null,"Your link is"),n.a.createElement("div",{className:"link-div"},n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e},e)))}}]),a}(n.a.Component),R={url:"https://example.com",template:(E=["#type=email&action=unsubscribe&userId=%s&campaign=Summer2020","#target=www.youtube.com&video=%s","#shop=www.amazon.com&productId=B00V155S46&couponCode=%s"],E[Math.floor(Math.random()*E.length)]),page:"https://projects.six-two.dev/react_redirect/follow.html"};var N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).showImportDialog=function(){var e=window.prompt("Input the URL to import the data from");if(e)try{var t=b(new URL(e));if(!t)return void alert("Your URL does not contain an embedded redirect link");var a=v("%s",t).url,n=function(e){var t=e.split("?",2);if(2===t.length)return[t[0],"?"+t[1]];if(2===(t=e.split("#",2)).length)return[t[0],"#"+t[1]];return[e,""]}(e.replace(a,"%s")),o=Object(s.a)(n,2),i={page:o[0],template:o[1],url:t};r.setData(i)}catch(c){console.error("Error importing URL:",e,"\n",c),alert("An error occured while importing the URL. Are you sure it is valid?")}},r.setData=function(e){r.setState({data:e})},r.loadDefaults=function(){r.setData(R)},r.state={},r}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h1",null,"Create a (deceptive) redirect link"),this.renderEditView())}},{key:"renderEditView",value:function(){return this.state.data?n.a.createElement(O,{data:this.state.data,setData:this.setData}):n.a.createElement("div",{className:"initial-buttons"},n.a.createElement("button",{onClick:this.loadDefaults},"Create new link"),n.a.createElement("button",{onClick:this.showImportDialog},"Import from URL"))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.2c497f18.chunk.js.map